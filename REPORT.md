# 作業の確認に使用したブラウザ
Chrome
バージョン: 121.0.6167.140（Official Build） （64 ビット）

# 技術的な決定
## アーキテクチャ
- MTVモデルを採用

    Djangoを使用するため

- csvの読み込みにはpandasを採用

## 仕様について
### ユーザ
月ごとの消費量と、日単位での消費量の推移が見れるとデータ分析の参考になると思いこの2つを表示させることとした。

### 全体
ユーザごとの合計値と平均値を表示することで、管理者が通知するユーザを決めやすいと思いこのデータを表示するようにした。

また、全体の日ごとの消費量の推移を表示することで消費が多い月の警告を出すなどの分析に使えると思いグラフ出力をした。

## 正確性
複雑な計算ロジックはライブラリの関数を用いて実施することでデータ計算にミスがないようにしました。

## コードの品質
保守性を高めるため、DocStringsと型アノテーションを付けるようにしました。
また、DRYの原則に基づいて処理の共通化を行いました。

## テスト
自分が実装したmodel,view,importに関してテストを記載しました。
テストはpytestとpytest-djangoを使用してテストするようにしました。

実行コマンドは以下のとおり。`dashboard`ディレクトリで実施します。
```bash
$ pytest --ds=dashboard.settings
```

# トレードオフ
## pythonのバージョン
pythonのバージョンが古く型を記入する際に使えない記法があったのでPythonバージョンのアップデートが必要だと思いました。

特に3.9で入った標準のコレクションでの型付けや3.10で入った共有体型オペレータの型のつけ方などは型定義を書くときにないと困ると感じました。

古い記法で型定義を記載しました。

## DB設計
areaとtariffの最大文字列長を255にしました。
既存データは2文字で表現されていましたが、仕様変更等で文字列長が変わった場合にDB設計を変更せずに対応するため255に設定しました。
しかし既存データからすると過剰であり、意図せず2文字以上のデータが入った際に検知できないため、バリデートとDB設計変更どちらを優先するかによって仕様が変わると思います。

# 問題
データのインポートに時間がかかっている気がします。
もっとパフォーマンスを上げれるといいと思いました。

`urls.py`のURL指定方法がDjango2.0以前のバージョンの書き方だったので元リポジトリも修正したほうがいいと思います。

# 実施していないもの
Challenge2
